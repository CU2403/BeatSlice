{% extends 'base.html' %}
{% block content %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Hip‑Hop Music Visualization</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}"/>
</head>
<body>
  <div class="container">
    <h1>Hip‑Hop Track Visualizer</h1>

    <div class="tracks-container">
      <!-- global play‑head overlay -->
      <canvas id="main-visualization"></canvas>

      {% for track in tracks %}
      <div class="track" data-track="{{ track.name|lower }}">
        <div class="track-controls">
          <div class="track-toggle">{{ track.name }}</div>
          <audio id="{{ track.name|lower }}"
                 src="{{ url_for('static', filename='audio/' + track.file) }}"
                 preload="auto"></audio>
          <div class="volume-control">
            <input type="range" class="volume-slider" min="0" max="100" value="100"/>
          </div>
        </div>
        <div class="visualization" id="{{ track.name|lower }}-viz"></div>
      </div>
      {% endfor %}
    </div>

    <div class="transport-controls">
      <button id="play-all">Play All</button>
      <button id="stop-all">Stop All</button>
    </div>
  </div>

  <script src="{{ url_for('static', filename='js/visualization.js') }}"></script>
</body>
</html>
{% endblock %}